apply plugin: 'maven-publish'

ext.sharedManifest = manifest {
    attributes( 'Implementation-Title': project.name, 'Implementation-Version': project.version )
}

jar {
    manifest = project.manifest {
        from sharedManifest
    }
    from( buildDir ) {
        include 'build-info.properties'
    }
}
jar.dependsOn 'createBuildInformationFile'

task sourcesJar( type: Jar, dependsOn: classes ) {
    classifier = 'sources'
    from sourceSets.main.allSource
    manifest = project.manifest {
        from sharedManifest
    }
}

artifacts {
    archives sourcesJar
}

publishing {
    publications {
        mavenJava( MavenPublication ) {
           from components.java
           artifact sourcesJar
        }
    }
}
